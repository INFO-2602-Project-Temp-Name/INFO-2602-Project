{% extends "layout.html" %}

{% block title %}UWI STA Map{% endblock %}
{% block page %}Campus Map{% endblock %}

{% block content %}
<h4>Preview: Google Map Integration</h4>
<div id="map"></div>

<style>
  #map {
    height: 80vh;
    width: 100%;
    margin-top: 20px;
  }
</style>

<!-- Google Maps API (replace YOUR_API_KEY) -->
<script async
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDaYQMeyTnu_o0ugYEur6dT14atMcOjXeI&callback=initMap">
</script>

<script>
  let markers = {{ markers|tojson }};

  function initMap() {
      const center = { lat: 10.6396, lng: -61.3995 };
      const map = new google.maps.Map(document.getElementById("map"), {
          zoom: 16,
          center: center,
      });

      markers.forEach(m => {
        const marker = new google.maps.Marker({
            position: { lat: m.latitude, lng: m.longitude },
            map,
            label: {
                text: m.name,
                fontSize: "12px",
                fontWeight: "bold"
            },
            title: m.name
        });
    
        const infoWindow = new google.maps.InfoWindow({
            content: `<strong>${m.name}</strong>`
        });
    
        marker.addListener("click", () => {
            infoWindow.open(map, marker);
        });
    });
    
  }
</script>

{% endblock %}
